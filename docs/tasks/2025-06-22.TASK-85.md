# Task Documentation: TASK-85

**Date**: 2025-06-22  
**Task ID**: TASK-85  
**Title**: Adapt Markdown syntax for posts/[id] page  
**Status**: In Progress  
**Assignee**: Pion (Claude Code)  

## Task Overview

Enhance the markdown presentation for blog posts by improving code block styling and implementing image modal functionality for better user experience.

## Objectives

### 1. Polish Code Block Styles
- Add proper spacing around code blocks
- Implement line numbers for better code readability
- Adjust font size to 14px for optimal viewing experience

### 2. Image Enhancement
- Enable embedded images with modal expansion functionality
- Implement click-to-expand behavior for better image viewing
- Research and integrate appropriate image modal library

## Technical Approach

### Current Implementation Analysis

**Markdown Processing Pipeline**:
- File: `/src/app/(models)/posts/components/post-content/index.tsx`
- Uses unified, remark-gfm, remark-rehype, rehype-pretty-code, rehype-react
- Current theme: 'vitesse-light'
- Renders using dangerouslySetInnerHTML

**Current Styling**:
- File: `/src/app/(models)/posts/components/post-content/index.module.css`
- Basic code block styling with 24px vertical margins
- Images have 24px vertical padding
- No line numbers or enhanced spacing currently implemented

### Implementation Plan

#### Code Block Enhancements
1. **Spacing**: Add proper padding around code blocks with background color
2. **Line Numbers**: Implement CSS counter-based line numbering using `[data-line]` attributes from rehype-pretty-code
3. **Font Size**: Set code font size to 14px with optimal line-height

#### Image Modal Implementation
1. **Library Selection**: Use "react-medium-image-zoom" based on user requirement
   - Medium.com-style image zoom functionality
   - Built-in `cursor: zoom-in` styling
   - TypeScript support via @types package
   - Professional quality similar to Zenn's implementation

2. **Integration Strategy**:
   - Replace default image rendering in rehype-react components
   - Create custom Image component with zoom functionality
   - Import default styles and customize as needed
   - Maintain accessibility and responsive design

## Dependencies

### Required Packages
- `react-medium-image-zoom` - Image zoom functionality with cursor styling
- `@types/react-medium-image-zoom` - TypeScript definitions
- No additional dependencies for code block enhancements (using existing rehype-pretty-code)

### Files to Modify
1. `/src/app/(models)/posts/components/post-content/index.tsx` - Add image component integration
2. `/src/app/(models)/posts/components/post-content/index.module.css` - Enhanced code block styling
3. New component for image modal functionality

## Testing Strategy

### Code Block Testing
- Verify line numbers appear correctly
- Test spacing and font size across different screen sizes
- Ensure syntax highlighting still works properly
- Test with various code languages and lengths

### Manual Testing (No automated tests required)
- Verify code block line numbers and styling
- Test image zoom functionality manually
- Check responsive design on different screen sizes
- Ensure accessibility with keyboard navigation

## Completion Criteria

### Code Blocks
- [ ] Line numbers display correctly for all code blocks
- [ ] Proper spacing (24px) around code block containers
- [ ] Font size is 14px with appropriate line-height
- [ ] Background styling enhances readability
- [ ] Syntax highlighting remains functional

### Images
- [ ] Images display with zoom cursor on hover
- [ ] Click functionality opens Medium-style zoom
- [ ] Zoom overlay displays correctly
- [ ] ESC key closes zoom modal
- [ ] Mobile touch gestures supported
- [ ] Accessibility features maintained

### Quality Assurance
- [ ] TypeScript compilation passes
- [ ] Linting rules satisfied (ESLint + Stylelint)
- [ ] No console errors or warnings
- [ ] react-medium-image-zoom integration working properly

## Notes

- Follow project coding guidelines from `docs/CODING_GUIDELINE.md`
- Use CSS Modules for styling consistency
- Maintain existing React Aria Components patterns
- Ensure changes don't break existing markdown features
- Consider future extensibility for additional markdown enhancements

## Related Links

- **Notion Task**: https://www.notion.so/ymmr/Adapt-Markdown-syntax-for-posts-id-page-21a433706fb480fbae2ef20b5f7e4fd8
- **GitHub PR**: https://github.com/yuki-yamamura/blog/pull/7
- **Branch**: feature/TASK-85

---

*Generated with Claude Code on 2025-06-22*